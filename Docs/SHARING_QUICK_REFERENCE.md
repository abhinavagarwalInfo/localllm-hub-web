# Document Sharing - Quick Reference

## âš¡ Quick Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DOCUMENT VISIBILITY                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Admin Uploads     â†’  ğŸ“¢ Everyone sees & uses          â”‚
â”‚  Developer Uploads â†’  ğŸ”’ Only that developer sees      â”‚
â”‚  Viewer Uploads    â†’  âŒ Not allowed                   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Visual Example

### Admin Account
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Admin                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Documents:                         â”‚
â”‚ âœ… handbook.pdf        [My upload] â”‚
â”‚ âœ… policies.docx       [My upload] â”‚
â”‚ âœ… catalog.xlsx        [My upload] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
        ğŸ“¢ SHARED WITH ALL
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’» Developer (Bob)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Documents:                         â”‚
â”‚ âœ… handbook.pdf    [Shared by Admin]â”‚
â”‚ âœ… policies.docx   [Shared by Admin]â”‚
â”‚ âœ… catalog.xlsx    [Shared by Admin]â”‚
â”‚ âœ… my_notes.txt    [My private doc] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
        ğŸ“¢ ADMIN DOCS SHARED
        ğŸ”’ PERSONAL DOCS PRIVATE
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ Viewer (Carol)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Documents:                         â”‚
â”‚ âœ… handbook.pdf    [Shared by Admin]â”‚
â”‚ âœ… policies.docx   [Shared by Admin]â”‚
â”‚ âœ… catalog.xlsx    [Shared by Admin]â”‚
â”‚                                    â”‚
â”‚ (Can't see Bob's my_notes.txt)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Chat Context

### Admin Chat
```
ğŸ’¬ Chat uses:
â”œâ”€ handbook.pdf      (my upload)
â”œâ”€ policies.docx     (my upload)
â””â”€ catalog.xlsx      (my upload)

Total: 3 documents
```

### Developer Chat
```
ğŸ’¬ Chat uses:
â”œâ”€ handbook.pdf      (shared from admin) ğŸ“¢
â”œâ”€ policies.docx     (shared from admin) ğŸ“¢
â”œâ”€ catalog.xlsx      (shared from admin) ğŸ“¢
â”œâ”€ my_notes.txt      (my private doc) ğŸ”’
â””â”€ project_plan.pdf  (my private doc) ğŸ”’

Total: 5 documents (3 shared + 2 private)
```

### Viewer Chat
```
ğŸ’¬ Chat uses:
â”œâ”€ handbook.pdf      (shared from admin) ğŸ“¢
â”œâ”€ policies.docx     (shared from admin) ğŸ“¢
â””â”€ catalog.xlsx      (shared from admin) ğŸ“¢

Total: 3 documents (all shared)
```

## âœ… What Changed

### Before Fix:
```
âŒ Admin uploads â†’ Only admin could use
âŒ Each user had isolated documents
âŒ No knowledge sharing
```

### After Fix:
```
âœ… Admin uploads â†’ Everyone can use
âœ… Shared company knowledge base
âœ… Developers keep personal docs private
âœ… Viewers access all shared knowledge
```

## ğŸ”§ Technical Changes

### 1. Upload Endpoint
```javascript
// Automatically mark admin uploads as public
const isPublic = req.user.role === 'admin' ? 1 : 0;
```

### 2. Document Retrieval
```javascript
// Get user's docs + all public docs
const userDocs = getUserDocs(userId);
const publicDocs = getPublicDocs(); // Admin uploads
return [...userDocs, ...publicDocs];
```

### 3. UI Indicator
```javascript
// Show badge on shared docs
{doc.shared && <span>Shared by Admin</span>}
```

## ğŸ“ Testing Commands

```bash
# Test as Admin
1. Login: admin / admin123
2. Upload: company_handbook.pdf
3. Verify: See in Documents tab

# Test as Developer
1. Login: developer user
2. Check Documents tab
3. âœ… Should see company_handbook.pdf with "Shared by Admin"
4. Upload: personal_notes.txt
5. âœ… Should see both docs

# Test as Viewer
1. Login: viewer user
2. Check Documents tab (if visible) or Chat
3. âœ… Should see company_handbook.pdf
4. âŒ Should NOT see developer's personal_notes.txt
5. Chat should work with shared docs
```

## ğŸ¨ UI Changes

### Documents Tab Header
```
Before: "3 documents"
After:  "5 docs â€¢ 3 shared â€¢ Semantic search active"
              â†‘ Shows count of shared docs
```

### Document List
```
Before:
ğŸ“„ handbook.pdf
   50 chunks â€¢ 2.3 MB

After:
ğŸ“„ handbook.pdf  [Shared by Admin] â† New badge
   50 chunks â€¢ 2.3 MB
```

## ğŸ’¡ Best Practices

### Admin:
```
âœ… DO upload: Company-wide documents
âœ… DO upload: Training materials
âœ… DO upload: Policies and procedures
âŒ DON'T upload: Personal work
âŒ DON'T upload: Drafts
```

### Developer:
```
âœ… DO upload: Personal notes
âœ… DO upload: Project-specific docs
âœ… DO upload: Work in progress
â„¹ï¸ KNOW: Your uploads stay private
â„¹ï¸ KNOW: You can use admin docs too
```

### Viewer:
```
âœ… DO use: All shared docs in chat
â„¹ï¸ KNOW: Can't upload (read-only)
â„¹ï¸ KNOW: See all admin knowledge
```

## ğŸš€ Benefits

### Organization:
âœ… Single source of truth (admin curates)
âœ… Consistent information for all
âœ… Easy onboarding
âœ… Knowledge preservation

### Users:
âœ… Instant access to company knowledge
âœ… Personal workspace maintained
âœ… No permission requests needed
âœ… Both shared + personal docs in chat

## âš ï¸ Important Notes

1. **Admin docs are automatically shared**
   - Can't make them private
   - Consider this when uploading

2. **Developer docs are automatically private**
   - Only that developer sees them
   - Can't share with others (yet)

3. **Viewers are read-only**
   - Can chat with all shared docs
   - Cannot upload anything

4. **RAG uses all visible docs**
   - Shared admin docs
   - Personal docs (if developer)
   - Best context from both

## ğŸ“ Quick Help

**"Can developers share docs?"**
â†’ Not yet. Only admin uploads are shared.

**"Can I make my admin doc private?"**
â†’ No. Admin uploads are always shared. Use a developer account for private docs.

**"Can viewers upload?"**
â†’ No. Viewers are read-only.

**"How do I know which docs are shared?"**
â†’ Look for "Shared by Admin" badge in Documents tab.

**"Do shared docs use my quota?"**
â†’ No quotas currently. All users can access shared docs freely.

---

**Perfect balance: Shared knowledge + Personal privacy** ğŸ¯

Admin = Company librarian ğŸ“š
Developer = Personal workspace + library access ğŸ”’ğŸ“–
Viewer = Library patron ğŸ‘ï¸ğŸ“–